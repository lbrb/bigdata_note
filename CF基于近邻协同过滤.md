# CF基于近邻的协同过滤

- 基于用户的最近邻推荐步骤

  - 找出与当前用户过去有相似偏好的其他用户，叫近邻用户（皮尔逊关系数计算公式，取值范围[-1,1]。-1：强不相关，0：无关，1：强相关）

  - 对当前用户没有见过的产品P，利用用户的近邻对产品p的评分进行预测（加权公式）
  - 将所有产品评分最高的TopN推荐给当前用户
- 基于物品的最近邻推荐

  - 使用余弦相似度来计算两个物品的相似度，取值范围[0,1], 越接近1表示越相似。
  - 改进余弦相似度，考虑了用户评分平均值之间的差异性，范围[-1,1]

  - 基于计算出来的物品之间的相似度，选择最相似的前N个物品出来，可以预测用户u对物品p的评分为
- 评分来源

  - 显示评分：通过问卷调查的方式手机用户对于商品的评分，优点是数据比较准确，缺点是很少人愿意提供评分
  - 隐士评分：当用户购买一个物品或浏览时，可以算作正向评分，优点是可以收集足够多的数据，缺点是不太准确
- 优点
  - 简单性：实现简单，而且在调整参数的过程中只有一个近邻数需要调整
  - 合理性：对于预测推荐提供了简单直观的理由
  - 高效性：基于近邻方法的推荐效果特别高，因为可以先进行预处理，构建出相似度矩阵，在实际应用过程中，可以提供近似实时的推荐效果
  - 稳定性：当相似度矩阵构建完成后，如果有一个新的用户或者新的物品有评分的时候，只需要计算这个个体和其他个体之间的相似性即可完成更新操作
- 缺点
  - 用户评分较少，解决办法可以用分类，聚类增加维度
  - 冷启动问题（只在协同过滤中存在），解决办法利用外部特征属性，推荐热门商品
- 相似度度量
  - 重要性权重：两个物品或用户之间的共同评分的物品、用户数量小于给定阈值的时候，就降低相似度重要性的权重，阈值大于等于25的时候，有比较好的预测结果
  - 相似度缩放：给定一个收缩因子，对相似度进行收缩转换，当共同评分数远远大于收缩因子的时候，物品的相似度几乎没有变化；收缩因子设置100，效果不错。
  - 反用户频率：用户评分都基本一样
- 近邻的选择
  - 推荐选值：25-50，具体值通过交叉验证来做
- 缺陷
  - 覆盖有限：只有对相同物品评分的用户才能作为近邻；只有被相同用户评分的物品才能做近邻
  - 对稀疏数据的敏感：由于只有一部分用户做评分，所以评分矩阵的稀疏性是大多数推荐系统的共同问题，当数据是稀疏的时候，两个用户或者物品之间的相似性计算仅适应很少的近邻，导致推荐有偏差。
- 解决方案
  - 默认值填充，额外特性属性关联（非评分，内容信息填充）

# 关联规则挖掘推荐算法

关联规则挖掘是一种在大规模交易中识别类似规则关系模式的通用技术，可以应用到CF类型的推荐系统中。

常见的规则挖掘算法是Apriori算法，关联规则的衡量指标是：支持度和可信度

# 矩阵因子分解（SVD）推荐算法

SVD（Singular Value Decomposition)的想法是根据已有的评分情况，分析出评分者对各个物品因子的喜好程度，以及各个物品对与这些因子的包含程度，最后再反过来根据分析结果预测评分。通过SVD的方式可以找出影响评分的显示因子和隐藏因子，这样更多有意义的关联关系就会被发现出来。





![](https://pic1.zhimg.com/80/v2-01954c5624732f7d00b991aa922f6dd0_hd.jpg)



召回层的作用在于根据用户的不同兴趣，从海量 item 中选出数百个用户感兴趣的 item。

而排序层的作用则是基于用户的一些特征，对召回层的 item 再次进行打分排序，更精准地选出用户感兴趣的 item。



召回模型负责根据用户和场景特征， 从众多的内容通道中抓取用户可能感兴趣的内容， 召回模型可能是多通道并行的， 通道与通道之间互不影响。召回模型也叫做触发模型。



排序模型根据CTR等指标， 对来自不同通道的所有召回内容进行排序。



召回和排序两个阶段所使用的特征也大不相同， 这样的做法可以避免单模型特征爆炸。





**召回阶段**根据用户的兴趣和历史行为，同千万级的视频库中挑选出一个小的候选集（几百到几千个视频）。

**排序阶段**在此基础上进行更精准的计算，能够给每一个视频进行精确打分，进而从成千上万的候选中选出用户最感兴趣的少量高质量内容（十几个视频）。