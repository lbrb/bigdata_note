# 内容去重

### 局部敏感Hash

局部敏感哈希的基本思想类似于一种空间域转换思想，LSH算法基于一个假设，如果两个文本在原有的数据空间是相似的，那么分别经过哈希函数转换以后的他们也具有很高的相似度；相反，如果他们本身不相似，那么经过转换后他们也不具有相似性

##### 举一个反例

hash(x) = x%8

hash(255) = 7;

hash(257) = 1;

hash(1023) = 7;

这个哈希函数从数值相似角度来看，它不是一个局部敏感哈希，因为经过他转换后的数据的相似性丧失了。

### 文档相似度计算

##### Shingling

将待查询的字符串集进行映射，映射到一个集合里，如字符串“abcdeeeee"，映射到集合（a,b,c,d,e)，集合中的元素是无重复的。意即构建文档中的短字符串集合，即shingling集合

在衡量文档的相似度中，我们有很多的方法去完成，比如利用欧式距离、编辑距离、余弦距离、Jaccard距离等来进行相似度的度量，我们选择jaccard相似度，我们需要找一种hash函数，使得在hash后尽量还能保持这些文档之间的Jaccard相似度

我们的目标就是找到这样的一种hash函数。如果原来文档的Jaccard相似度高，那么他们的hash值相同的概率高，如果原来文档的Jaccard相似度低，那么他们的hash值不相同的概率高，叫Min-hashing

### Min-hashing

定义：特征矩阵按行进行一个随机的排列后，第一个列值为1的行的行号。

|      | S1   | S2   | S3   | S4   |
| ---- | ---- | ---- | ---- | ---- |
| 他   | 0    | 0    | 1    | 0    |
| 成功 | 0    | 0    | 1    | 1    |
| 我   | 1    | 0    | 0    | 0    |
| 减肥 | 1    | 0    | 1    | 1    |
| 要   | 0    | 1    | 0    | 1    |

最小哈希值：h(S1)=3，h(S2)=5，h(S3)=1，h(S4)=2

为什么定义最小hash？事实上，两列的最小hash值就是这两列的Jaccard相似度的一个估计，换句话说，两列最小hash值同等的概率与其相似度相等。





### 疑问

- 为什么不直接使用jaccard相似度，反而使用mini-hashing后在计算jaccard相似度